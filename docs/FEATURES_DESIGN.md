# LyEdu 功能设计（对照 PlayEdu 企业版）

**本项目不区分企业版与开源版，按 [PlayEdu 企业版](https://www.playeduos.com/function.html) 能力规划，全部功能开源实现。**

- 参考：PlayEdu 功能明细 https://www.playeduos.com/function.html  
- 功能介绍图（示意）：  
  ![PlayEdu 功能介绍](https://camo.githubusercontent.com/6de901ba7a26ed0a77fdf3baca3803bcf9d0ab105b5c4ec51765daf8a61b8cea/68747470733a2f2f6d656564752e636c6f75642e6f73732e6d656564752e7669702f706c61796564752f2545352538392538442545352538462542302545392541312542352545392539442541322e6a7067)

---

## 一、功能对照总表

| 大类 | 功能项 | PlayEdu 能力 | LyEdu 现状 | 优先级 | 备注 |
|-----|--------|--------------|-----------|--------|------|
| **资源类型** | 视频库 | MP4(H264)、上传、断点续传、进度 | ✅ 已有 | - | 支持上传、断点续传、进度 |
| | 图片库 | ✓ | ⭕ 计划 | P2 | 可复用上传与课程封面 |
| | 附件库 | ✓ | ✅ 已有 | - | 课程附件 |
| | 文档库（Word/PPT/PDF 在线预览） | 文档线上预览、缩放、水印 | ✅ 已有（PDF） | - | PC 预览页+知识/附件 PDF；Word/PPT 后续 |
| | 音频库 | ✓ | ⭕ 计划 | P2 | 资源类型扩展 |
| | 证书库 | 个性化证书、模板、编号、查询与打印 | ⭕ 计划 | P1 | 学习/考试合格关联证书 |
| | 讲师资料 | ✓ | ⭕ 计划 | P2 | 可选 |
| **考试中心** | 试题库（多题型、批量导入、多媒体） | 六大题型、图片/视频/音频 | ❌ 未做 | P1 | 单选/多选/判断/填空/简答 |
| | 试卷库（组卷） | ✓ | ❌ 未做 | P1 | 依赖试题库 |
| **培训任务** | 线上课 | ✓ | ✅ 已有 | - | 课程+章节+视频 |
| | 线下课 | 线下场次、签到 | ⭕ 计划 | P2 | 线下场次、签到 |
| | 课程评论（多级、管理员回复） | ✓ | ✅ 已有 | - | 评论表+接口+PC/H5 展示与回复 |
| | 周期任务 | 周期、指派、闯关、证书 | ✅ 已有 | - | 任务表、部门指派、闯关项(课程+考试)、完成颁证 |
| | 新员工任务 | 按入职时间指派 | ✅ 已有 | - | 任务 cycle_type=newcomer + 用户入职日期、可见天数 |
| | 考试任务 | 独立指派、过期补考、自由/闯关 | ✅ 已有 | - | 考试任务+部门可见、交卷计分、成绩列表 |
| | 指派方式 | 部门/学员 | ✅ 部门 | - | 课程可见性已按部门 |
| **知识中心** | 知识库（多类型文件下载） | ✓ | ✅ 已有 | - | ly_knowledge + 部门可见 + PC/H5 知识中心 |
| | 可见范围 | 部门/学员/用户组 | ✅ 部门 | - | 与课程一致 |
| **积分激励** | 积分规则 | ✓ | ❌ 未做 | P2 | 积分表、规则配置 |
| | 积分商城 | ✓ | ❌ 未做 | P2 | 可选 |
| | 积分调整/排行 | ✓ | ❌ 未做 | P2 | 简单排行 |
| **数据统计** | 数据概览 | ✓ | ✅ 已有 | - | Dashboard 数字卡片 |
| | 学习排行 | ✓ | ✅ 已有 | - | 学习课程数/平均进度排行 |
| | 资源统计 | ✓ | ✅ 已有 | - | 课程/视频/章节/附件数 |
| | 各类导出 | ✓ | ✅ 已有 | - | 学员、学习记录、部门学习 CSV |
| **学习保护** | 防挂机 | 智能防挂机 | ⭕ 计划 | P2 | 学习行为检测 |
| | 防拖拽/快进 | ✓ | ⭕ 计划 | P2 | 视频播放限制 |
| | 防录屏/水印 | 动态跑马灯、水印 | ⭕ 计划 | P2 | 可选 |
| **系统配置** | 网站/播放/学员设置 | ✓ | ⭕ 计划 | P1 | 配置表与后台页 |
| | 集成登录 | 企微、钉钉、飞书、CAS、通讯录 | ✅ 飞书 | - | 已留扩展钉钉/企微 |
| | 存储 | MinIO、阿里云 OSS、腾讯云 COS | ⭕ 本地/扩展 | P2 | 当前本地，可接 OSS |
| | 视频加密 | HLS 转码加密 | ⭕ 计划 | P2 | 可选 |
| **多终端** | PC / 移动端 H5 | ✓ | ✅ 已有 | - | 统一入口已做 |

图例：✅ 已有　⭕ 计划中　❌ 未做

---

## 二、阶段规划

### P0（当前已具备）
- 用户/部门/课程/章节/视频/附件管理
- 视频学习与进度、课程可见性（部门）
- 课程评论、数据统计与导出、知识库/知识中心
- PC + H5 + 管理后台、统一入口、飞书登录

### P1（优先完善，对齐 PlayEdu 企业版核心）
1. **文档在线预览**：PDF（PDF.js/iframe），再扩展 Word/PPT（转换或第三方）
2. **考试中心基础**：试题库（单选/多选/判断/填空/简答）、试卷库、考试任务与成绩
3. **证书**：证书模板、学习/考试合格关联证书、编号查询与打印
4. **周期任务**：周期学习任务、指派部门/学员、闯关模式、关联证书
5. **新员工任务**：按入职时间自动指派课程/任务
6. **系统配置**：网站/播放/学员设置（配置表与后台页）

### P2（后续增强）
- 线下课（场次、签到）
- 积分规则、积分排行、积分商城（可选）
- 讲师资料、图片库、音频库
- 存储对接 OSS/MinIO、视频 HLS 加密
- 防挂机、防拖拽快进、防录屏/水印
- 扩展集成登录（钉钉、企微、CAS、通讯录同步）

---

## 三、实现顺序建议

| 顺序 | 功能 | 说明 |
|------|------|------|
| 1 | 课程评论 | ✅ 已完成 |
| 2 | 数据统计与导出 | ✅ 已完成 |
| 3 | 知识库/知识中心 | ✅ 已完成 |
| 4 | 文档在线预览 | 先 PDF，再 Word/PPT |
| 5 | 考试中心 | 试题→试卷→考试任务→成绩与统计 |
| 6 | 证书 | 证书表、模板、关联任务/考试、编号与打印 |
| 7 | 周期任务 | 任务表、周期、指派、闯关、证书 | ✅ 已完成 |
| 8 | 新员工任务 | 按入职时间指派 | ✅ 已完成 |
| 9 | 系统配置 | 配置表、后台设置页 | ✅ 已完成 |

后续按 P2 列表与反馈再排期。

---

## 四、数据与接口设计要点（概要）

- **课程评论**：`ly_course_comment`，接口：列表（分页）、发表、回复、删除/隐藏。✅
- **数据统计**：概览、学习排行、资源统计、导出 CSV。✅
- **知识库**：`ly_knowledge`、`ly_knowledge_department`，列表+下载+部门可见。✅
- **考试**：`ly_question`、`ly_paper`、`ly_exam`、`ly_exam_record`，题型枚举、组卷、考试任务、交卷与成绩。
- **证书**：`ly_certificate`、`ly_certificate_template`、`ly_user_certificate`，模板、编号、关联任务/考试。
- **周期任务**：`ly_task`、`ly_task_department`、`ly_user_task`，周期、闯关、证书关联。
- **新员工任务**：复用任务表，按用户 `create_time` 或入职时间字段指派。
- **系统配置**：`ly_config`（key-value 或分类表），网站标题、播放器设置、学员默认设置等。

详细表结构在实现各功能时再在对应 migration/API 文档中补充。

---

## 五、企业版能力对齐说明

以下能力按 PlayEdu 企业版描述对齐，LyEdu 均以开源方式实现：

| 能力 | 说明 | LyEdu 规划 |
|------|------|------------|
| 文档预览 | Word/PPT/PDF 在线预览、缩放、水印 | P1：先 PDF，再 Word/PPT |
| 证书 | 个性化设计、模板、智能生成、编号查询与打印 | P1：证书表+模板+关联任务/考试 |
| 学习/考试任务 | 独立指派部门/学员、过期补考、自由/闯关模式 | P1：考试任务+周期任务+闯关 |
| 周期任务 / 新员工任务 | 周期指派、按入职时间指派 | P1：任务表+周期+新员工规则 |
| 数据跟踪 | 学习考试数据实时跟踪、合格关联证书 | 已有统计；证书关联在 P1 |
| 存储与安全 | MinIO/OSS/COS、HLS 加密、防录屏 | P2：存储对接；防挂机/防拖拽/水印 |
| 集成登录 | 企微、钉钉、飞书、CAS、通讯录同步 | 已实现飞书；P2 扩展钉钉/企微/CAS |
